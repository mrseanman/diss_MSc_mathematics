% !TeX root = ../../main.tex
\documentclass[class=article, crop=false]{standalone}
\begin{document}
\subsection{The subcomplex $X_{W}^\prime$}
The definition of $K_{W_w}$ depends on the data of some Coxeter element $w$ and thus implicitly some generating set $S$. For some $w = s_1s_2\cdots s_n$ and some $T\subseteq S$, define $w_T\in W$ to correspond subword of $w$ consisting of elements that are in $T$, respecting the original order in $w$. 
\begin{definition}[The subcomplex]
    Define $X_{W}^\prime$ to be the finite subcomplex of $K_{W_w}$ consisting only of simplices $[x_1 | \cdots | x_n]$ such that $x_1x_2\cdots x_n \in [1,w_T]^W$ for some $T \in \Delta_W$. Recalling $\Delta_W$ from \cref{def:delta_W_finite}.
    \label{def:subcomplex_X_prime}
\end{definition}
Note that we have dropped the $w$ index. That will be justified in this section as we will show that, up to homotopy equivalence, $X_W^\prime$ has no $w$ dependence.

\begin{lemma}[{\cite[Lemma 5.2]{paolini_salvetti_kpi1_2021}}]
    \what[As far as I can tell, what I write here is all we need, but there they seem to go in to more detail unnecessarily]
    For a Coxeter group $W$ and any parabolic subgroup $W_T$, with sets of reflections $R_W$ and $R_{W_T}$ respectively. For some Coxeter element $w \in W$ and corresponding $w_T \in W_T$, all minimal factorisations of $w_T$ in $R_W$ consist of only elements from $R_{W_T}$.
\end{lemma}
An immediate consequence of this is that the intervals $[1,w_T]^W$ and $[1,w_T]^{W_T}$ agree. This allows us to decompose $X^\prime_W$ in a useful way. For each $T \in \Delta_W$ and corresponding $W_T$, the space corresponding to the whole interval $[1, w_T]^W=[1,w_T]^{W_T}$ is a subspace inside $X^\prime_W$. This subspace is exactly $X^\prime_{W_T}$ (with respect to $w_T$). Thus, we can think of $X^\prime_W$ as some union of all $X^\prime_{W_T}$ for $T \in \Delta_W$.

Each $X^\prime_{W_T}$ is exactly the same as its interval complex $K_{{W_T}}$ since all subgroups of $T$ generate finite Coxeter groups. Thus, $X^\prime_{W_T}$ is a classifying space for the dual Artin group $W_w$ by \cref{thm:interval_cx_k_pi_1_finite}. Furthermore, $G_w$ is isomorphic to the Artin group $G_{W_T}$ by \cref{thm:dual_artin_iso_artin}.

In a very similar way, the Salvetti complex consists of subspaces corresponding to elements of $\Delta_W$. For each $T \in \Delta_W$, the Salvetti complex $X_{W_T}$ is a $\Abs{T}$--cell attached to all cells corresponding to $R \subseteq T$ is the appropriate way. This is a cellular subspace of $X_W$, and since $W_T$ is finite, by \cref{thm:k_pi_1_finite}, $Y_{W_T} \simeq X_{W_T}$ is a $K(G_{W_T},1)$. The following remark summarises.

\begin{remark}
    The Salvetti complex $X_W$ decomposes in to cellular subspaces $X_{W_T}$ which are $K(G_{W_T},1)$ spaces. These subspaces are in bijection with cellular subspaces $X^\prime_{W_T}$ of $X^\prime_W$, which are also $K(G_{W_T},1)$ spaces.
    \label{rmk:salvetti_X_prime_similarities}
\end{remark}

 The following theorems will help us to exploit this similarity to show that $X_W \simeq X^\prime_{W}$.

\begin{lemma}
    A null homotopic map $\rho \colon S^n \to X$ can be extended to a map $\sigma \colon D^{n+1} \to X$.
    \label{lem:null_homotopic_extension}
\end{lemma}
\begin{proof}
    Let $H \colon S^n \times I \to X$ witness the null homotopy with $H|_{S^n \times \Set{1}} \colon S^n \to \Set{x_0}$. We have that $H$ factors uniquely through $(S^n \times I)/(S^n \times \Set{1}) \cong D^{n+1}$. With $\sigma$ being the necessary map as below.

    \begin{equation*}
        \begin{tikzcd}
            &S^n \times I       \arrow[d, "q"]      \arrow[r, "H"]                                &X \\
            &(S^n \times I)/(S^n \times \Set{1})    \arrow[ru, "\exists ! \sigma", swap, dotted]
        \end{tikzcd}
    \end{equation*}

\end{proof}

\begin{theorem}[{\cite[Proposition 1B.9]{hatcher_algebraic_2001}}]
    Let $Y$ be a $K(G,1)$ space and $X$ a finite dimensional CW complex consisting of one 0--cell, the point $x_0$. Any homomorphism $\phi \colon \pi_1(X,x_0) \to \pi_1(Y,y_0)$ is induced by a map $\tilde{\phi} \colon X \to Y$ where $\tilde{\phi}$ is unique up to homotopy fixing $x_0$.
    \label{thm:iso_induces_unique_map_for_K_Pi_1}
\end{theorem}

\begin{proof}
    Clearly we must have $\tilde{\phi}(x_0) = y_0$. The 1--skeleton $X^1$ will be a wedge of circles and there is thus a presentation of $\pi_1(X, x_0)$ with each cell $e_\alpha^1$ corresponding to a generator $ [e_\alpha^1] \in \pi_1(X, x_0)$. We can choose $\tilde{\phi}(e_\alpha)$ to trace to a path corresponding to $\phi([e_\alpha^1]) \in \pi_1(Y,y_0)$ for each $e_\alpha^1 \in X^1$.
    
    Let $\psi_\beta \colon S^1 \to X^1$ be an attaching map for a 2--cell $e_\beta^2 \in X$. Let $i \colon X^1 \hookrightarrow X$ be the inclusion. We have that $i_*$ is the surjetcion from the free group generated by each $e_\alpha^1$ to $\pi_1(X,x_0)$. The attaching of the 2--cell $e_\beta^2$ provides a null homotopy for the path traced by $\psi_\beta$. In the presentation of $\pi_1(X, x_0)$ as above, each relation corresponds to the path of a $\psi_\beta$. Thus, $i_*([\psi_\beta]) = 0$ and so $\tilde{\phi}_*([\psi_\beta]) = \phi \circ i_*([\psi_\beta]) = 0$. Thus, $\tilde{\phi} \circ \psi_\beta$ is null homotopic and so can be extended over all of the closure of $e_\beta^2$ by \cref{lem:null_homotopic_extension}. This is an extension of $\tilde{\phi}$ and repeating this allows us to extend $\tilde{\phi}$ over all of $X^2$.
    
    To extend $\tilde{\phi}$ over $e_\gamma^3$ we use that $S^{2}$ is simply connected (as for any $S^n$ with $n\geq 2$) and so for the attaching map $\psi_\gamma \colon S^2 \to X^2$ we have that $\tilde{\phi} \circ \psi_\gamma$ lifts to the universal cover of $Y$, which is contractible since $Y$ is a $K(G,1)$, so $\tilde{\phi} \circ \psi_\gamma$ is null homotopic. This same argument applies for any $e_\delta^n$ for $n\geq 3$. We can thus extend $\tilde{\phi}$ over the 3--cells and proceeding inductively, over all of $X$.

    Now we turn to the uniqueness of $\tilde{\phi}$ up to homotopy. Let $\phi$ be some homomorphism and $\tilde{\phi}_0$ and $\tilde{\phi}_1$ be any such maps constructed as above. Clearly $\tilde{\phi}_0(x_0) = \tilde{\phi}_1(x_0)$ and $\tilde{\phi}_0|_{X^1} \sim \tilde{\phi}_1|_{X^1}$ by the restrictions of our construction. Let $H$ witness this homotopy. Give $X \times I$ the following CW structure: Let $X\times \Set{0}$ and $X\times \Set{1}$ both have the same cell structure as $X$ with cells notated $d_\alpha^n$ and $e_\alpha^n$ respectively. Connect $d^0$ to $e^0$ with a 1--cell $s^1$, called \emph{the spine}. Connect a 2--cell $s_\alpha^2$ along $d_\alpha^1$, then $s^1$ then $e_\alpha^1$ then back along $s^1$ with opposite orientations on $d_\alpha^1$ and $e_\alpha^1$ such that $d^0 \cup e^0 \cup s^1 \cup d_\alpha^1 \cup e_\alpha^1 \cup s_\alpha^2 \cong S^1 \times I$. The spine now consists of $s_1 \cup s_\alpha^2$. Repeat this for each 1--cell in $X$ and then repeat for each 2--cell and so on, attaching an $s_\beta^n$ along $d_\beta^{n-1}$, $e_\beta^{n-1}$ and $s_\beta^{n-1}$, inductively building up the spine. A picture of this CW complex completed for one $s_\alpha^2$ is below.
    \begin{equation*}
    \begin{tikzpicture}
        \tikzstyle{every label}=[font=\scriptsize]
        \tikzstyle{every node}=[font=\scriptsize]

        \node[FSC] (d_0) at (0,0)               [label={[label distance=-4pt]-60:{$d^0$}}]      {};
        \node[FSC] (e_0) at ($(d_0) + (3,0)$)   [label={[label distance=-2pt]240:{$e_0$}}]      {};

        \node            at ($(d_0) + (-0.5,1.5)$)                                              {$d_\alpha^1$};
        \node            at ($(e_0) + (0.5,1.5)$)                                               {$e_\alpha^1$};
        \node            at ($(d_0)!0.5!(e_0) + (0,1.8)$)                                       {$s_\alpha^2$};
        \draw (d_0) to node[below] {$s^1$} (e_0);

        \draw[rotate = 0, name path=d_11]   (d_0) .. controls ($(d_0) + (-1,2)$) and ($(d_0) + (1,2)$) .. (d_0);
        \draw[rotate = 60, name path=d_12]  (d_0) .. controls ($(d_0) + (-1,2)$) and ($(d_0) + (1,2)$) .. (d_0);
        \draw[rotate = 120, name path=d_12] (d_0) .. controls ($(d_0) + (-1,2)$) and ($(d_0) + (1,2)$) .. (d_0);


        \draw[rotate = 0, name path=e_11]    (e_0) .. controls ($(e_0) + (-1,2)$) and ($(e_0) + (1,2)$) .. (e_0);
        \draw[rotate = -60, name path=e_12]  (e_0) .. controls ($(e_0) + (-1,2)$) and ($(e_0) + (1,2)$) .. (e_0);
        \draw[rotate = -120, name path=e_12] (e_0) .. controls ($(e_0) + (-1,2)$) and ($(e_0) + (1,2)$) .. (e_0);


        \foreach \y in {0.1,0.4,...,1.3}{
            \path[name path=s_1] ($(d_0) + (-2,\y)$)          to ($(e_0) + (2,\y)$);
            \path[name path=s_2] ($(d_0) + (-2,\y)+ (0,0.1)$) to ($(e_0) + (2,\y) + (0,0.1)$);
            \node [coordinate, name intersections = {of = d_11 and s_1}] (s_l_1) at (intersection-1) {};
            \node [coordinate, name intersections = {of = d_11 and s_2}] (s_l_2) at (intersection-2) {};

            \node [coordinate, name intersections = {of = e_11 and s_1}] (s_r_1) at (intersection-1) {};
            \node [coordinate, name intersections = {of = e_11 and s_2}] (s_r_2) at (intersection-2) {};

            \draw[white!80!black, line width=0.1mm] (s_l_1) to (s_r_1);
            \begin{pgfonlayer}{background}
                \draw[white!80!black, line width=0.05mm, dashed] (s_l_2) to (s_r_2);
            \end{pgfonlayer}
        }
    \end{tikzpicture}
    \vspace{-0.6cm}
    \end{equation*}
    We can now extend the domain of $H$ from $X^1 \times I$ to all of $X \times I$ using this cell structure. Note that now we have two 0--cells, but this does not cause any issues. Let $H$ have domain $X^1 \times I \subseteq X \times I$. Now extend $H$ such that $H|_{X\times \Set{0}}$ agrees with $\tilde{\phi}_0$ and $H|_{X\times \Set{1}}$ agrees with $\tilde{\phi}_1$. This is possible because $H$ is a homotopy between restrictions of these maps. Note that now $H$ is defined on the whole 2--skeleton of $X \times I$. We can extend $H$ to all the higher dimensional cells by the exact same argument as before, using the contractability of the universal cover of $Y$. Thus, we have a continuous function $H \colon X \times I \to Y$ witnessing the homotopy $\tilde{\phi}_0 \sim \tilde{\phi}_1$.
\end{proof}

\begin{corollary}
    Let $X$ and $Y$ both be $K(G,1)$ spaces. Any isomorphism $\phi \colon \pi_1(X,x_0) \to \pi_1(Y,y_0)$ induces a homotopy equivalence witnessing $X \simeq Y$.
    \label{cor:iso_K_G_1_induces_hom_equiv}
\end{corollary}
\begin{proof}
    We have maps $\tilde{\phi} \colon X \to Y$ and $\widetilde{(\phi^{-1})} \colon Y \to X$ with $(\tilde{\phi} \circ \widetilde{(\phi^{-1})})_* = \id_{\pi_1(Y,y_0)}$. Thus, since the homotopy class of such maps is determined by the induced action on their fundamental groups $\tilde{\phi}\circ \widetilde{(\phi^{-1})} \sim \id_Y$. Similarly, $\widetilde{(\phi^{-1})} \circ \tilde{\phi} \sim \id_X$.
\end{proof}

\begin{lemma}
    \label{lem:extendability_of_maps}
    Let $T \in \Delta_W \setminus \emptyset$. Let $\phi \colon \bigcup_{Q \subsetneq T} X_{W_Q} \to \bigcup_{Q \subsetneq T} X^\prime_{W_Q}$ be a homotopy equivalence. We can extend $\phi$ to $\psi \colon X_{W_T} \to X^\prime_{W_T}$ such that the following diagram commutes.
    \begin{equation*}
        \begin{tikzcd}
\bigcup_{Q \subsetneq T} X_{W_Q}  \ar[r, "\phi"]             &   \bigcup_{Q \subsetneq T} X^\prime_{W_Q}                                                   \\
X_{W_T} \ar[r, "\psi" ] \ar[from=u, hookrightarrow]                                  &   X^\prime_{W_T}  \ar[from = u, hookrightarrow]      \\
        \end{tikzcd}
    \end{equation*}
\end{lemma}
\begin{proof}
    We prove this by cases. By \cref{rmk:salvetti_X_prime_similarities}, $X_{W_T}$ and $X^\prime_{W_T}$ are classifying spaces.
    \begin{enumerate}[i)]
        \item If $\Abs{T}=1$ then $Q$ is uniquely $\emptyset$. Let $\psi$ be any map witnessing $X_{W_T} \simeq X^\prime_{W_T}$ that fixes the point corresponding to $X_{W_Q}$.
        \item If $\Abs{T} = 2$ then we can extend $\phi$ to $\psi$ such that $\psi_* \colon \pi_1(X_{W_T}, X_{\emptyset}) \to \pi_1(X^\prime_{W_T}, X^\prime_{\emptyset})$ is an isomorphism using the same argument as in the proof of \cref{thm:iso_induces_unique_map_for_K_Pi_1}. This map is a homotopy equivalence by \cref{cor:iso_K_G_1_induces_hom_equiv}.
        \item If $\Abs{T} \geq 3$ then we can extend $\phi$ to some map $\psi$ using the same methods as in \cref{thm:iso_induces_unique_map_for_K_Pi_1}. In this case, $\bigcup_{Q \subsetneq T} X_{W_Q}$ contains the 2--skeleton of $X_T$ and similarly for $\bigcup_{Q \subsetneq T} X^\prime_{W_Q}$ and $X^\prime_T$. So $\pi_1(\bigcup_{Q \subsetneq T} X_{W_Q}, X_{W_\emptyset}) =\pi_1(X_T, X_{W_\emptyset})$ and similarly for $X^\prime_T$.  By assumption $\phi$ is a homotopy equivalence and so $\phi_*$ is an isomorphism. Therefore $\psi_*$ is the same isomorphism and thus $\psi$ a homotopy equivalence by \cref{cor:iso_K_G_1_induces_hom_equiv}. 
    \end{enumerate}
    .  
\end{proof}


\begin{definition}[Adjunction Space]
    For two spaces $X$ and $U$, with a continuous map $f \colon A \to U$ for some subspace $A \subseteq X$. The \emph{adjunction space} $ X \sqcup_f U$  is the space formed by gluing $X$ and $U$ via the map $f$.
    \begin{equation*}
        X \sqcup_f U \coloneq (X \sqcup Y)/(a \sim f(a))
    \end{equation*}
\end{definition}

An adjunction space is associated to the commutative diagram
\begin{equation}
    \begin{tikzcd}
            A \ar[r, "f" ] \ar[d, "i"]  &   U  \ar[d, "\bar{i}"]    \\
            X \ar[r, "\bar{f}"]         &   X \sqcup_f U            \\
    \end{tikzcd}
\label{eqn:adjunction_diagram}
\end{equation}
where $i$ is inclusion of $A$ in to $X$ and $\bar{i}$ is inclusion of $U$ in to $X \sqcup_f U $. Suppose we also have the adjunction space $Y \sqcup_g V$ with $g \colon B \to V$ and $B\subseteq Y$. Suppose further that we have maps $ \phi_1 \colon X \to Y$, $\phi_2 \colon A \to B$ and $\phi_3 \colon U \to V$ such that the following diagram commutes.
\begin{equation}
    \begin{tikzcd}[row sep=scriptsize, column sep=scriptsize]
A \ar[dr, "\phi_2"'] \ar[rr, "f"] \ar[dd, "i"']     &                                                                           &   U \ar[dr, "\phi_3"] \ar[dd, "\bar{i}", near start]  &                         \\
                                                &   B \ar[rr, crossing over, "g" near start]                                &                                                       &   V \ar[dd, "\bar{j}"]  \\
X \ar[dr, "\phi_1"'] \ar[rr, "\bar{f}"', near end]  &                                                                           &   X \sqcup_f U \ar[dr, "\phi"]                        &                         \\
                                                &   Y \ar[rr, "\bar{g}"']  \ar[from=uu, crossing over, "j"', near start]    &                                                       &   Y\sqcup_gV            \\
    \end{tikzcd}
\label{eqn:adjunction_gluing_diagram}
\end{equation}
If all $\phi_1$, $\phi_2$ and $\phi_3$ are homotopy equivalences then the following lemma tells us that $\phi$ is also a homotopy equivalence.


\begin{lemma}[{\cite[Theorem 7.5.7]{brown_topology_2006}}]
    Consider a commutative diagram as in \eqref{eqn:adjunction_gluing_diagram} where the front and back faces define an adjunction space as in \eqref{eqn:adjunction_diagram}. If $i$ and $j$ are closed cofibrations and $\phi_1$, $\phi_2$ and $\phi_3$ are homotopy equivalences, then the $\phi$ as determined by the diagram is also a homotopy equivalence.
    \label{lem:adjunction_gluing}
\end{lemma}

The restriction of $i$ and $j$ being closed cofibrations is quite mild. In the cases important to us, $i$ and $j$ will be cellular inclusions in to finite CW complexes, and thus closed cofibrations. See \cite{brown_topology_2006} for more details on pushout squares and adjunction spaces.

To use \cref{lem:adjunction_gluing} we must be able to construct $X_W$ and $X_W^\prime$ as a sequence of adjunction spaces. Consider $X_W$ in the following toy example.

\begin{example}
    \label{eg:inductive_construction}
    Let $\Delta_W = \Set{\emptyset, \Set{s}, \Set{t}, \Set{u}, \Set{s,t}, \Set{s,u}, \Set{t,u}}$ and let $\Delta_W^n \coloneq \Set{T \in \Delta_W \given \Abs{T} = n }$. Clearly we have that $X_W = \bigcup_{T \in \Delta_W^2} X_{W_T}$ with the appropriate gluing. Suppose we had the 1--skeleton $X^1_W \subsetneq X_W$, and some ordering on $\Delta_W^2 = (\Set{s,t}, \Set{s,u}, \Set{t,u})$. We would first glue $X_{\Set{s,t}}$ to $X_W^1$ as an adjunction space in the following way.
    \begin{equation*}
        \begin{tikzcd}
                X_{\Set{s}} \cup X_{\Set{t}} \ar[r, "f" ] \ar[d, "i_1"]   &   X_{\Set{s,t}}  \ar[d, "\overline{i_1}"]    \\
                X_W^1 \ar[r, "\bar{f}"]                                 &   X^1_W \sqcup_f X_{\Set{s,t}}            \\
        \end{tikzcd}
    \end{equation*}
    Where $f$ is inclusion of those 1--cells in to $X_{\Set{s,t}}$, which in this case makes $X^1_W \sqcup_f X_{\Set{s,t}} \cong X_{\Set{s,t}}$. Note that $ X_{\Set{s}} \cup X_{\Set{t}}$ is really shorthand for another adjunction space.
    We can then add $X_{\Set{t,u}}$ to the preceding adjunction space in the following way.
    \begin{equation}
        \begin{tikzcd}
                X_{\Set{t}} \cup X_{\Set{u}} \ar[r, "g" ] \ar[d, "i_2"]   &   X_{\Set{t,u}}  \ar[d, "\overline{i_2}"]    \\
                X^1_W \sqcup_f X_{\Set{s,t}} \ar[r, "\bar{g}"]            &   (X^1_W \sqcup_f X_{\Set{s,t}}) \sqcup_g X_{\Set{t,u}}            \\
        \end{tikzcd}
        \label{eqn:inductive_gluing_step_2}
    \end{equation}
    After which we would continue with $\Set{u,v}$ in the same manner. In the final space, $X_{\Set{s,t}}$ is glued to $X_{\Set{t,u}}$ along $X_{\Set{t}}$. In general, for $T_1,T_2 \in \Delta_W^n$ are glued along $T_1 \cap T_2 \in \Delta_W^{n-1}$. We can always construct the $n$--skeleton from the $(n-1)$--skeleton in exactly this way. 
\end{example}

The exact same construction works for $X^\prime_W$.

\begin{theorem}[{\cite[Theorem 5.5]{paolini_salvetti_kpi1_2021}}]
    For a Coxeter group $W$, the space $X^\prime_W$ as in \cref{def:subcomplex_X_prime} is homotopy equivalent to the Salvetti complex $X_W$. 
\end{theorem}
\begin{proof}
    We achieve this inductively. To tidy our notation, in this proof we drop $W$ so that $X$, $X^\prime$, $X_T$ and $X^\prime_T$ correspond to $X_W$, $X^\prime_W$, $X_{W_T}$ and $X^\prime_{W_T}$ respectively. For convenience define $\Delta_W^n \coloneq \Set{T \in \Delta_W \given \Abs{T} = n}$. Suppose we have the $(n-1)$--skeletons $X^{n-1}$ and $(X^\prime)^{n-1}$ and a homotopy equivalence $\phi \colon X^{n-1} \to (X^\prime)^{n-1}$.
    We wish to show that we can extend $\phi$ to a homotopy equivalence for the respective $n$--skeletons. We construct the $n$--skeletons as adjunction spaces of the $(n-1)$--skeletons as in \cref{eg:inductive_construction}.
    To show this extension is a homotopy equivalence we use \cref{lem:adjunction_gluing}.
    Suppose we are gluing on the cells corresponding to some $T \in \Delta_W^n$. So any $Q \subsetneq T$ will correspond to a cell in $X^{n-1}$. Let $Y$ and $Y^\prime$ be some intermediate steps in the adjunction gluing, such as the bottom--left term of \eqref{eqn:inductive_gluing_step_2}. Suppose we have a homotopy equivalence $\phi_1 \colon Y \to Y^\prime$ such that ${\phi_1}|_{X^{n-1}} = \phi$ so the following commutes.
    \begin{equation}
        \begin{tikzcd}
\bigcup_{Q \subsetneq T} X_{Q} \ar[r, "\phi" ] \ar[d, hookrightarrow]     &   \bigcup_{Q \subsetneq T} X^\prime_{Q}  \ar[d, hookrightarrow]       \\
Y  \ar[r, "\phi_1"]                                                                 &   Y^\prime                                                                \\
        \end{tikzcd}
        \label{eqn:commutative_Y_inductive_hyp}  
    \end{equation}
We wish to extend $\phi$ to a homotopy equivalence $\psi$ such that the following commutes.
    \begin{equation*}
        \begin{tikzcd}
X_T \ar[r, "\psi" ] \ar[from=d, hookrightarrow]                                  &   X^\prime_T  \ar[from = d, hookrightarrow]      \\
\bigcup_{Q \subsetneq T} X_{Q}  \ar[r, "\phi"]             &   \bigcup_{Q \subsetneq T} X^\prime_{Q}                                                   \\
        \end{tikzcd}
    \end{equation*}
    This is possible by \cref{lem:extendability_of_maps}. Now we have the following commutative diagram.

\begin{equation}
    \begin{tikzcd}[row sep=scriptsize, column sep=scriptsize]
\bigcup_{Q \subsetneq T} X_{Q} \ar[dr, "\phi"'] \ar[rr, "f"] \ar[dd, hookrightarrow]     &  &   X_T \ar[dr, "\psi"] \ar[dd, hookrightarrow]  &  \\
 &   \bigcup_{Q \subsetneq T} X^\prime_{Q} \ar[rr, crossing over, "g" near start] & & X^\prime_T \ar[dd, hookrightarrow]                                    \\
Y \ar[dr, "\phi_1"'] \ar[rr, "\bar{f}"', near end]  &                                                                           &   Y \sqcup_f X_T \ar[dr, "\sigma"]                        &                                   \\
                                                &   Y^\prime \ar[rr, "\bar{g}"']  \ar[from=uu, crossing over, hookrightarrow]    &                                                       &   Y^\prime\sqcup_g X^\prime_T        \\
    \end{tikzcd}
\label{eqn:gluing_commutative_diagram_proof}
\end{equation}

    Where the induced map $\sigma$ is a homotopy equivalence by \cref{lem:adjunction_gluing}. At the next inductive step, $Y \sqcup_f X_T$ and $Y^\prime\sqcup_g X^\prime_T$ replace $Y$ and $Y^\prime$ respectively. Accordingly, $\sigma$ replaces $\phi_1$. Suppose we are next going to glue the cells corresponding to $\tilde{T} \in \Delta_W$. To proceed inductively, there are two possible outcomes:
    \begin{enumerate}
        \item We are still constructing $X^n \simeq (X^\prime)^n$ and $\tilde{T} \in \Delta_W^n$.
        \item We completely constructed $X^n \simeq (X^\prime)^n$ in the previous step and $\tilde{T} \in \Delta_W^{n+1}$.
    \end{enumerate}
    
    In Case 1, we have that any $Q \subsetneq \tilde{T}$ corresponds to cells in $X^{n-1}$. By the inductive hypothesis, we can restrict $\phi_1 \colon Y \to Y^\prime$ to $X^{n-1}$, and thus we can do the same for $\sigma$ and so the restriction $\sigma|_{X^{n-1}}$ is well--defined, we can get \eqref{eqn:commutative_Y_inductive_hyp} with the appropriate replacements and proceed inductively. 

    In Case 2, $Y \sqcup_f X_T$ and $Y^\prime\sqcup_g X^\prime_T$ are $X^n$ and $(X^\prime)^n$ respectively. Some $Q\subsetneq \tilde{T}$ will correspond to cells in $X^n$, but $\sigma$ is exactly the restriction $\sigma|_{X^n}$ so the restriction is well--defined. We get \eqref{eqn:commutative_Y_inductive_hyp} with the appropriate replacements and proceed inductively.

    The base case is $X_\emptyset \simeq X^\prime_\emptyset \simeq \Set{\bullet}$.
\end{proof}

\end{document}